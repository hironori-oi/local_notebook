# 社内AIノート（NotebookLMライクWebアプリ）要件定義書

## 1. 背景

社内で扱う審議会資料・ガイドライン・業務マニュアル等はPDFやWordファイルとして多数存在している。
これらを効率よく検索・要約・理解するために、社内ネットワーク内のみで動作するローカルLLMを活用した
「NotebookLM ライクなリサーチ支援Webアプリ（以下、本システム）」を構築する。

## 2. 目的

- 社内資料をNotebook単位で整理し、資料に基づくQ&Aや要約をLLMで行えるようにする。
- 資料をアップロードすると自動でテキスト変換・インデックス化され、RAG（Retrieval Augmented Generation）により高精度な回答を得られるようにする。
- 社外インターネット接続不要な、完全オンプレミス環境で提供する。

## 3. 用語定義

- Notebook  
  特定のテーマ・案件・会議単位でまとめられた「資料セット」と「Q&A・ノート」のコンテナ。
- ソース（Source）  
  Notebookに紐づく資料（PDF, Word, Text等）。
- ノート（Note）  
  LLMから得られた回答のうち、ユーザーが保存したもの。レポート・メモの単位。
- RAG  
  Retrieval Augmented Generation。ベクター検索により関連するテキストチャンクを取得し、LLMのプロンプトに付与して回答を生成する方式。

## 4. システム概要

- フロントエンド：Next.js 15 / React / TypeScript
- バックエンド：FastAPI / Python
- DB：PostgreSQL + pgvector
- LLMサーバ：ローカルGPU搭載PC上の vLLM 等。社内NWからHTTPアクセス可能。
- 本システムは社内ネットワーク内のみで動作し、外部インターネット接続は行わない。

## 5. スコープ

### 5.1 MVPで実装する機能（Must）

1. 認証
   - ローカルユーザー管理（ユーザー名 + パスワード）
   - ログイン / ログアウト
2. Notebook管理
   - Notebook一覧表示
   - Notebook新規作成（タイトル・説明）
   - Notebook削除
   - Notebook詳細画面
3. 資料（ソース）管理
   - Notebook単位でのファイルアップロード（PDF, Word, Text, Markdown）
   - サーバ側でのテキスト抽出・チャンク分割・ベクトル化・インデックス登録
   - Notebook内ソース一覧表示
4. チャット＆QA（RAG）
   - Notebook詳細画面にチャットUIを表示
   - 対象ソース（Notebook内全ソース or 複数選択）を指定して質問を送信
   - RAGにより関連チャンクを検索し、LLMに質問＋コンテキストを渡して回答取得
   - 回答とともに参照したソース情報（資料名・ページ等）を表示
5. 回答の保存（ノート機能）
   - 各回答に対する「保存」ボタン
   - 保存した回答（ノート）の一覧表示（Notebook単位）
   - ノート詳細表示（質問・回答・参照ソース）
6. 監査ログ（最低限）
   - 認証・Notebook作成/削除・ファイルアップロード・LLM問い合わせの履歴をDBに記録

### 5.2 将来拡張（Nice to have / Out of Scope for MVP）

- AD / LDAP / SSO等による統合認証
- Notebook共有機能（他ユーザーとの共同利用）
- 対応ファイル形式の拡大（PowerPoint, Excel, Web URL, 音声, OCRなど）
- 回答スタイルのプリセット（要約・箇条書き・初心者向け等）
- ノート本文の編集・共同編集
- Notebook内ノートからレポート自動生成（Word / PDF）
- Mind Map / Flashcards / Quiz / Audio Overview などNotebookLM類似機能
- 管理者向けダッシュボード（利用状況・GPU負荷等）

## 6. 非機能要件（抜粋）

- 性能：Q&A 1リクエストあたり、初期トークンが返ってくるまでの目安は3〜10秒程度。
- 同時利用：初期は数ユーザー〜十数ユーザー程度を想定。
- セキュリティ：HTTPS、アクセスログ・操作ログ。
- 運用：DBおよびアップロードファイルの定期バックアップ。

（詳細は今後の設計フェーズでブラッシュアップする）
